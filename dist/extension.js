(()=>{"use strict";var t={970:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=s(496);e.default=class{constructor({config:t,context:e}){this.config=t,this.context=e,this.runComplement(),this.provideVaribalesCompletionItems=this.provideVaribalesCompletionItems.bind(this),this.provideClassCompletionItems=this.provideClassCompletionItems.bind(this)}runComplement(){this.context&&this.pushInput()}pushInput(){this.pushVaribales(),this.pushClassName()}pushVaribales(){const t=this,e=i.languages.registerCompletionItemProvider("less",{provideCompletionItems:(e,s)=>t.provideVaribalesCompletionItems.call(t,e,s)},"@");this.context?.subscriptions?.push(e)}provideVaribalesCompletionItems(t,e){if(t.lineAt(e).text.substr(0,e.character).endsWith("@"))return[...Object.entries(this.config?.variableMap||{}).map((t=>{const e=t[1].startsWith("#")||t[1].toLowerCase().startsWith("rgb")||t[1].toLowerCase().startsWith("hls")?i.CompletionItemKind.Color:i.CompletionItemKind.Variable,s=new i.CompletionItem(`@${t[0]}`,e);return s.detail=t[1],s.documentation=t[1],s}))]}pushClassName(){const t=this,e=i.languages.registerCompletionItemProvider("less",{provideCompletionItems:(e,s)=>t.provideClassCompletionItems.call(t,e,s)},".");this.context?.subscriptions.push(e)}provideClassCompletionItems(t,e){if(t.lineAt(e).text.substr(0,e.character).endsWith("."))return[...this.config?.classes?.map((t=>{const e={label:`.${t.class}`},s=new i.CompletionItem(e,i.CompletionItemKind.Variable);return s.detail=t.detail,s}))||[]]}}},130:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=s(440),a=s(638);e.default=async t=>{const e=await(async t=>{const e=[(0,i.getFile)(".lessvhrc"),(0,i.getFile)("lessvhrc.js"),(0,i.getFile)("lessvhrc.json")];let s=null;for(const t of e){let e=await t;if(null!==e){try{s=JSON.parse(e)}catch(t){console.log("初始化文件非JSON格式")}break}}return s})();if(null===e)return;const s=new a.default({config:e});return await s.init(),s}},440:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRealFilePath=e.readLine=e.getFile=void 0;const i=s(496),a=s(17),r=s(147),l=s(521);e.getFile=t=>new Promise((s=>{try{return r.readFile((0,e.getRealFilePath)(t),"utf8",((t,e)=>{t&&s(null),s(e)}))}catch(t){s(null)}})),e.readLine=async(t,s)=>{const i=r.createReadStream((0,e.getRealFilePath)(t)),a=l.createInterface({input:i,crlfDelay:1/0});for await(const t of a)s&&await s(t)},e.getRealFilePath=t=>{try{const e=i.workspace.workspaceFolders;return e?a.resolve(e[0].uri.fsPath,t):""}catch(t){return""}}},638:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=s(440);e.default=class{constructor({config:t}){this.alias={},this.entry="",this.variableMap={},this.holdingStr="",this.classes=[];const{alias:e={},entry:s=""}=t;"[object Object]"===Object.prototype.toString.call(e)&&(this.alias=e),"string"==typeof s&&s.endsWith(".less")&&(this.entry=s),Array.isArray(s)&&(this.entry=s.filter((t=>!("string"!=typeof t||!t.endsWith(".less"))))),this.entry}async init(){Array.isArray(this.entry)?this.entry=this.entry.map((t=>this.aliasReplace(t))):this.entry=this.aliasReplace(this.entry),await this.initialyze()}aliasReplace(t){const e=Object.keys(this.alias);if(0===e.length)return t;for(const s of e)t=t.replace(s,this.alias[s]);return t}async initialyze(){if(Array.isArray(this.entry)){this.entry=this.entry.map((t=>this.aliasReplace(t)));for(const t of this.entry)await this.processFile(t)}else await this.processFile(this.entry)}async processFile(t){await(0,i.readLine)(t,(async t=>{await this.analyze(t)}))}async analyze(t){switch(!0){case t.startsWith("@import"):await this.initialyzeChildFile(t);break;case t.startsWith("."):this.initialyzeClassName(t);break;case t.startsWith("@"):this.initialyzeVariable(t);break;default:this.holdingStr&&this.initialyzeClassName(t)}}async initialyzeChildFile(t){const e=/["'](.+.less)['"]/gi.exec(t);if(e){const t=this.aliasReplace(e[1]);await this.processFile(t)}}initialyzeClassName(t){if(t.startsWith(".")&&this.holdingStr){const e=/.([\w-]+)([\s\S]+)?/gi.exec(this.holdingStr);if(e){const s=e[1]??"",i=e[2]??"";s&&(this.classes.push({class:s,detail:i}),this.holdingStr=t)}}else!t.startsWith(".")&&this.holdingStr?this.holdingStr+=`\r${t}`:t.startsWith(".")&&!this.holdingStr&&(this.holdingStr+=`${t}`)}initialyzeVariable(t){const e=/@([\w]+)\s?:\s?([^;]+);/gi.exec(t);let s,i;e&&(s=e[1],i=e[2],this.variableMap[s]=i)}}},880:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=s(130),a=s(970);e.default=async t=>{const e=await(0,i.default)(t);return e?new a.default({config:e,context:t}):null}},496:t=>{t.exports=require("vscode")},147:t=>{t.exports=require("fs")},17:t=>{t.exports=require("path")},521:t=>{t.exports=require("readline")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}var i={};(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const e=s(880);t.activate=function(t){console.log('"less-variable-helper" is now active!'),(0,e.default)(t)},t.deactivate=function(){}})(),module.exports=i})();